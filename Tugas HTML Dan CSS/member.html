<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member - Farhan Kurniawan</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header { background-color: #1e3a8a; padding: 30px 0; }
        .container { display: flex; flex: 1; }
        .sidebar {
            background-color: #fbbf24; width: 280px; padding: 40px 30px;
            display: flex; flex-direction: column; align-items: center;
        }
        .profile { text-align: center; margin-bottom: 50px; }
        .profile h1 { color: #1e3a8a; font-size: 22px; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
        .profile p { color: #1e3a8a; font-size: 14px; font-weight: 600; }
        .menu { width: 100%; }
        .menu-item {
            display: block; width: 100%; padding: 15px 25px; margin-bottom: 15px;
            text-align: center; text-decoration: none; color: #1e3a8a;
            font-weight: 600; font-size: 16px; border-radius: 8px; transition: all 0.3s ease;
        }
        .menu-item.active { background-color: #1e3a8a; color: #fbbf24; }
        .menu-item:hover:not(.active) { background-color: rgba(30, 58, 138, 0.1); }
        .content { flex: 1; background-color: #f5f5f5; padding: 40px; }
        footer { background-color: #1e3a8a; padding: 30px 0; }

        table {
            width: 100%; border-collapse: collapse; margin-top: 25px; background-color: #fff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden;
        }
        thead { background-color: #1e3a8a; color: #fff; }
        th, td { padding: 14px 16px; text-align: left; }
        tbody tr:nth-child(even) { background-color: #f1f5f9; }
        tbody tr:hover { background-color: #e2e8f0; }
        .action-btn {
            padding: 6px 10px; border: none; border-radius: 5px; cursor: pointer;
            font-size: 13px; margin-right: 5px;
        }
        .edit-btn { background-color: #fbbf24; color: #1e3a8a; }
        .delete-btn { background-color: #ef4444; color: white; }
        .select-btn { background-color: #1e3a8a; color: #fbbf24; }

        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); justify-content: center; align-items: center;
        }
        .modal-content {
            background: #fff; padding: 25px; border-radius: 8px; width: 400px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .modal-buttons { margin-top: 15px; text-align: right; }
        .modal-buttons button {
            padding: 8px 12px; margin-left: 8px; border: none; border-radius: 5px; cursor: pointer;
        }
        .save-btn { background-color: #1e3a8a; color: #fbbf24; }
        .cancel-btn { background-color: #e5e7eb; color: #000; }
    </style>
</head>
<body>
<header></header>

<div class="container">
    <aside class="sidebar">
        <div class="profile" id="profileDisplay">
            <h1 id="profileName">FARHAN KURNIAWAN</h1>
            <p id="profileRole">Member</p>
        </div>

        <nav class="menu">
            <a href="index.html" class="menu-item">Home</a>
            <a href="member.html" class="menu-item active">Member</a>
            <a href="produk.html" class="menu-item">Produk</a>
            <a href="registrasi.html" class="menu-item">Registrasi</a>
        </nav>
    </aside>

    <main class="content">
        <h2>Daftar Member</h2>
        <p>Berikut adalah data member yang terdaftar.</p>

        <table id="memberTable">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama</th>
                    <th>Email</th>
                    <th>No. Telepon</th>
                    <th>Jabatan</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </main>
</div>

<footer></footer>

<!-- Modal Edit -->
<div class="modal" id="editModal">
    <div class="modal-content">
        <h3>Edit Data Member</h3>
        <label>Nama</label>
        <input type="text" id="editNama">
        <label>Email</label>
        <input type="email" id="editEmail">
        <label>No. Telepon</label>
        <input type="text" id="editTelepon">
        <label>Jabatan</label>
        <input type="text" id="editJabatan">
        <div class="modal-buttons">
            <button class="cancel-btn" onclick="closeModal()">Batal</button>
            <button class="save-btn" onclick="saveEdit()">Simpan</button>
        </div>
    </div>
</div>

<script>
let currentRow = null;

// âœ… Ambil dan tampilkan data member dari localStorage
document.addEventListener("DOMContentLoaded", function() {
    const tableBody = document.querySelector("#memberTable tbody");
    let dataMember = JSON.parse(localStorage.getItem("dataMember")) || [];

    if (dataMember.length === 0) {
        // Data default (contoh awal)
        dataMember = [
            { nama: "Budi Santoso", email: "budi@mail.com", telepon: "08123456789", jabatan: "Manager" },
            { nama: "Siti Aisyah", email: "siti@mail.com", telepon: "08987654321", jabatan: "Staff" }
        ];
        localStorage.setItem("dataMember", JSON.stringify(dataMember));
    }

    renderTable(dataMember);

    const nama = localStorage.getItem("selectedNama");
    const jabatan = localStorage.getItem("selectedJabatan");
    if (nama && jabatan) {
        document.getElementById("profileName").textContent = nama.toUpperCase();
        document.getElementById("profileRole").textContent = jabatan;
    }
});

function renderTable(dataMember) {
    const tableBody = document.querySelector("#memberTable tbody");
    tableBody.innerHTML = "";
    dataMember.forEach((member, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${index + 1}</td>
            <td>${member.nama}</td>
            <td>${member.email}</td>
            <td>${member.telepon}</td>
            <td>${member.jabatan}</td>
            <td>
                <button class="action-btn select-btn" onclick="selectMember(this)">Select</button>
                <button class="action-btn edit-btn" onclick="editMember(this)">Edit</button>
                <button class="action-btn delete-btn" onclick="deleteMember(this)">Hapus</button>
            </td>
        `;
        tableBody.appendChild(row);
    });
}

function selectMember(button) {
    const row = button.closest('tr');
    const nama = row.cells[1].textContent;
    const jabatan = row.cells[4].textContent;
    localStorage.setItem("selectedNama", nama);
    localStorage.setItem("selectedJabatan", jabatan);
    document.getElementById('profileName').textContent = nama.toUpperCase();
    document.getElementById('profileRole').textContent = jabatan;
    alert("Data berhasil dipilih: " + nama);
}

function editMember(button) {
    currentRow = button.closest('tr');
    document.getElementById('editNama').value = currentRow.cells[1].textContent;
    document.getElementById('editEmail').value = currentRow.cells[2].textContent;
    document.getElementById('editTelepon').value = currentRow.cells[3].textContent;
    document.getElementById('editJabatan').value = currentRow.cells[4].textContent;
    document.getElementById('editModal').style.display = 'flex';
}

function closeModal() {
    document.getElementById('editModal').style.display = 'none';
}

function saveEdit() {
    let dataMember = JSON.parse(localStorage.getItem("dataMember")) || [];
    const index = currentRow.rowIndex - 1;
    dataMember[index] = {
        nama: document.getElementById('editNama').value,
        email: document.getElementById('editEmail').value,
        telepon: document.getElementById('editTelepon').value,
        jabatan: document.getElementById('editJabatan').value
    };
    localStorage.setItem("dataMember", JSON.stringify(dataMember));
    renderTable(dataMember);
    closeModal();
}

function deleteMember(button) {
    if (confirm("Yakin ingin menghapus data member ini?")) {
        let dataMember = JSON.parse(localStorage.getItem("dataMember")) || [];
        const index = button.closest('tr').rowIndex - 1;
        dataMember.splice(index, 1);
        localStorage.setItem("dataMember", JSON.stringify(dataMember));
        renderTable(dataMember);
    }
}
</script>
</body>
</html>
